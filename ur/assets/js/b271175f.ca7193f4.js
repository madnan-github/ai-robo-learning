"use strict";(globalThis.webpackChunkwebsite=globalThis.webpackChunkwebsite||[]).push([[554],{6571:(n,e,i)=>{i.r(e),i.d(e,{assets:()=>s,contentTitle:()=>l,default:()=>d,frontMatter:()=>t,metadata:()=>o,toc:()=>m});const o=JSON.parse('{"id":"module-2/chapter-3/robot-models-gazebo","title":"Creating Robot Models in Gazebo","description":"This chapter focuses on adapting your URDF models for Gazebo simulation, including adding Gazebo-specific plugins, sensors, and physical properties to create realistic robot simulations.","source":"@site/docs/module-2/chapter-3/robot-models-gazebo.md","sourceDirName":"module-2/chapter-3","slug":"/module-2/chapter-3/robot-models-gazebo","permalink":"/ai-robo-learning/ur/docs/module-2/chapter-3/robot-models-gazebo","draft":false,"unlisted":false,"editUrl":"https://github.com/madnan-github/ai-robo-learning/docs/module-2/chapter-3/robot-models-gazebo.md","tags":[],"version":"current","sidebarPosition":3,"frontMatter":{"sidebar_position":3,"title":"Creating Robot Models in Gazebo"},"sidebar":"tutorialSidebar","previous":{"title":"Gazebo Physics Simulation","permalink":"/ai-robo-learning/ur/docs/module-2/chapter-2/gazebo-physics"},"next":{"title":"Sensor Simulation","permalink":"/ai-robo-learning/ur/docs/module-2/chapter-4/sensor-simulation"}}');var a=i(4848),r=i(8453);const t={sidebar_position:3,title:"Creating Robot Models in Gazebo"},l="Creating Robot Models in Gazebo",s={},m=[{value:"What You&#39;ll Learn",id:"what-youll-learn",level:2},{value:"Prerequisites",id:"prerequisites",level:2},{value:"Adapting URDF for Gazebo",id:"adapting-urdf-for-gazebo",level:2},{value:"Gazebo-Specific Tags",id:"gazebo-specific-tags",level:3},{value:"Gazebo Link Properties",id:"gazebo-link-properties",level:3},{value:"Adding Gazebo Plugins",id:"adding-gazebo-plugins",level:2},{value:"Joint State Publisher Plugin",id:"joint-state-publisher-plugin",level:3},{value:"Diff Drive Controller Plugin",id:"diff-drive-controller-plugin",level:3},{value:"Joint Position Controller Plugin",id:"joint-position-controller-plugin",level:3},{value:"Adding Sensors to Robots",id:"adding-sensors-to-robots",level:2},{value:"IMU Sensor",id:"imu-sensor",level:3},{value:"Camera Sensor",id:"camera-sensor",level:3},{value:"LiDAR Sensor",id:"lidar-sensor",level:3},{value:"Complete Humanoid Robot Model for Gazebo",id:"complete-humanoid-robot-model-for-gazebo",level:2},{value:"Hands-on Lab: Creating and Testing Your Robot Model",id:"hands-on-lab-creating-and-testing-your-robot-model",level:2},{value:"Step 1: Create the Model Directory Structure",id:"step-1-create-the-model-directory-structure",level:3},{value:"Step 2: Convert URDF to SDF",id:"step-2-convert-urdf-to-sdf",level:3},{value:"Step 3: Create a Launch File",id:"step-3-create-a-launch-file",level:3},{value:"Step 4: Test the Robot",id:"step-4-test-the-robot",level:3},{value:"Troubleshooting Robot Models",id:"troubleshooting-robot-models",level:2},{value:"Common Issues and Solutions",id:"common-issues-and-solutions",level:3},{value:"Debugging Commands",id:"debugging-commands",level:3},{value:"Best Practices",id:"best-practices",level:2},{value:"Next Steps",id:"next-steps",level:2}];function c(n){const e={code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,r.R)(),...n.components};return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(e.header,{children:(0,a.jsx)(e.h1,{id:"creating-robot-models-in-gazebo",children:"Creating Robot Models in Gazebo"})}),"\n",(0,a.jsx)(e.p,{children:"This chapter focuses on adapting your URDF models for Gazebo simulation, including adding Gazebo-specific plugins, sensors, and physical properties to create realistic robot simulations."}),"\n",(0,a.jsx)(e.h2,{id:"what-youll-learn",children:"What You'll Learn"}),"\n",(0,a.jsx)(e.p,{children:"In this chapter, you'll explore:"}),"\n",(0,a.jsxs)(e.ul,{children:["\n",(0,a.jsx)(e.li,{children:"Adapting URDF models for Gazebo simulation"}),"\n",(0,a.jsx)(e.li,{children:"Adding Gazebo plugins for robot control"}),"\n",(0,a.jsx)(e.li,{children:"Configuring sensors for simulation"}),"\n",(0,a.jsx)(e.li,{children:"Setting up joint controllers"}),"\n",(0,a.jsx)(e.li,{children:"Testing robot models in Gazebo environments"}),"\n"]}),"\n",(0,a.jsx)(e.h2,{id:"prerequisites",children:"Prerequisites"}),"\n",(0,a.jsxs)(e.ul,{children:["\n",(0,a.jsx)(e.li,{children:"Completion of Module 1 (especially URDF chapter)"}),"\n",(0,a.jsx)(e.li,{children:"Completion of Module 2, Chapter 2"}),"\n",(0,a.jsx)(e.li,{children:"Gazebo Harmonic installed"}),"\n",(0,a.jsx)(e.li,{children:"Basic understanding of robot kinematics"}),"\n"]}),"\n",(0,a.jsx)(e.h2,{id:"adapting-urdf-for-gazebo",children:"Adapting URDF for Gazebo"}),"\n",(0,a.jsx)(e.h3,{id:"gazebo-specific-tags",children:"Gazebo-Specific Tags"}),"\n",(0,a.jsx)(e.p,{children:"To make your URDF work properly in Gazebo, you need to add Gazebo-specific tags:"}),"\n",(0,a.jsx)(e.pre,{children:(0,a.jsx)(e.code,{className:"language-xml",children:'<?xml version="1.0"?>\n<robot name="gazebo_humanoid">\n\n  \x3c!-- Links and joints as in URDF --\x3e\n  <link name="base_link">\n    <visual>\n      <geometry>\n        <box size="0.2 0.2 0.1"/>\n      </geometry>\n      <material name="blue">\n        <color rgba="0 0 0.8 1"/>\n      </material>\n    </visual>\n\n    <collision>\n      <geometry>\n        <box size="0.2 0.2 0.1"/>\n      </geometry>\n    </collision>\n\n    <inertial>\n      <mass value="5.0"/>\n      <origin xyz="0 0 0"/>\n      <inertia ixx="0.1" ixy="0.0" ixz="0.0" iyy="0.1" iyz="0.0" izz="0.1"/>\n    </inertial>\n  </link>\n\n  \x3c!-- Gazebo-specific material definition --\x3e\n  <gazebo reference="base_link">\n    <material>Gazebo/Blue</material>\n    <mu1>0.2</mu1>\n    <mu2>0.2</mu2>\n  </gazebo>\n\n</robot>\n'})}),"\n",(0,a.jsx)(e.h3,{id:"gazebo-link-properties",children:"Gazebo Link Properties"}),"\n",(0,a.jsx)(e.p,{children:"You can specify additional properties for links in Gazebo:"}),"\n",(0,a.jsx)(e.pre,{children:(0,a.jsx)(e.code,{className:"language-xml",children:'<gazebo reference="link_name">\n  <mu1>0.2</mu1>                    \x3c!-- Friction coefficient 1 --\x3e\n  <mu2>0.2</mu2>                    \x3c!-- Friction coefficient 2 --\x3e\n  <kp>1000000.0</kp>                \x3c!-- Spring stiffness --\x3e\n  <kd>100.0</kd>                    \x3c!-- Damping coefficient --\x3e\n  <material>Gazebo/Blue</material>  \x3c!-- Visual material --\x3e\n  <self_collide>false</self_collide> \x3c!-- Enable self-collision --\x3e\n  <gravity>true</gravity>            \x3c!-- Enable gravity for this link --\x3e\n  <max_contacts>10</max_contacts>    \x3c!-- Max contacts with other objects --\x3e\n</gazebo>\n'})}),"\n",(0,a.jsx)(e.h2,{id:"adding-gazebo-plugins",children:"Adding Gazebo Plugins"}),"\n",(0,a.jsx)(e.h3,{id:"joint-state-publisher-plugin",children:"Joint State Publisher Plugin"}),"\n",(0,a.jsx)(e.p,{children:"To publish joint states from Gazebo:"}),"\n",(0,a.jsx)(e.pre,{children:(0,a.jsx)(e.code,{className:"language-xml",children:'<gazebo>\n  <plugin filename="gz-sim-joint-state-publisher-system" name="gz::sim::systems::JointStatePublisher">\n    <joint_name>left_hip</joint_name>\n    <joint_name>left_knee</joint_name>\n    <joint_name>right_hip</joint_name>\n    <joint_name>right_knee</joint_name>\n    \x3c!-- Add more joint names as needed --\x3e\n  </plugin>\n</gazebo>\n'})}),"\n",(0,a.jsx)(e.h3,{id:"diff-drive-controller-plugin",children:"Diff Drive Controller Plugin"}),"\n",(0,a.jsx)(e.p,{children:"For wheeled robots:"}),"\n",(0,a.jsx)(e.pre,{children:(0,a.jsx)(e.code,{className:"language-xml",children:'<gazebo>\n  <plugin filename="gz-sim-diff-drive-system" name="gz::sim::systems::DiffDrive">\n    <left_joint>left_wheel_joint</left_joint>\n    <right_joint>right_wheel_joint</right_joint>\n    <wheel_separation>0.4</wheel_separation>\n    <wheel_radius>0.1</wheel_radius>\n    <odom_publish_frequency>30</odom_publish_frequency>\n    <topic>cmd_vel</topic>\n    <odom_topic>odom</odom_topic>\n    <tf_topic>tf</tf_topic>\n  </plugin>\n</gazebo>\n'})}),"\n",(0,a.jsx)(e.h3,{id:"joint-position-controller-plugin",children:"Joint Position Controller Plugin"}),"\n",(0,a.jsx)(e.p,{children:"For humanoid robots with revolute joints:"}),"\n",(0,a.jsx)(e.pre,{children:(0,a.jsx)(e.code,{className:"language-xml",children:'<gazebo>\n  <plugin filename="gz-sim-joint-position-controller-system" name="gz::sim::systems::JointPositionController">\n    <joint_name>left_hip</joint_name>\n    <topic>left_hip_position_controller/command</topic>\n    <update_rate>100</update_rate>\n  </plugin>\n</gazebo>\n'})}),"\n",(0,a.jsx)(e.h2,{id:"adding-sensors-to-robots",children:"Adding Sensors to Robots"}),"\n",(0,a.jsx)(e.h3,{id:"imu-sensor",children:"IMU Sensor"}),"\n",(0,a.jsx)(e.pre,{children:(0,a.jsx)(e.code,{className:"language-xml",children:'<link name="imu_link">\n  <inertial>\n    <mass value="0.01"/>\n    <origin xyz="0 0 0"/>\n    <inertia ixx="0.000001" ixy="0" ixz="0" iyy="0.000001" iyz="0" izz="0.000001"/>\n  </inertial>\n  <visual>\n    <geometry>\n      <box size="0.01 0.01 0.01"/>\n    </geometry>\n  </visual>\n  <collision>\n    <geometry>\n      <box size="0.01 0.01 0.01"/>\n    </geometry>\n  </collision>\n</link>\n\n<joint name="imu_joint" type="fixed">\n  <parent link="torso"/>\n  <child link="imu_link"/>\n  <origin xyz="0 0 0.1" rpy="0 0 0"/>\n</joint>\n\n<gazebo reference="imu_link">\n  <sensor name="imu_sensor" type="imu">\n    <always_on>true</always_on>\n    <update_rate>100</update_rate>\n    <imu>\n      <angular_velocity>\n        <x>\n          <noise type="gaussian">\n            <mean>0.0</mean>\n            <stddev>2e-4</stddev>\n          </noise>\n        </x>\n        <y>\n          <noise type="gaussian">\n            <mean>0.0</mean>\n            <stddev>2e-4</stddev>\n          </noise>\n        </y>\n        <z>\n          <noise type="gaussian">\n            <mean>0.0</mean>\n            <stddev>2e-4</stddev>\n          </noise>\n        </z>\n      </angular_velocity>\n      <linear_acceleration>\n        <x>\n          <noise type="gaussian">\n            <mean>0.0</mean>\n            <stddev>1.7e-2</stddev>\n          </noise>\n        </x>\n        <y>\n          <noise type="gaussian">\n            <mean>0.0</mean>\n            <stddev>1.7e-2</stddev>\n          </noise>\n        </y>\n        <z>\n          <noise type="gaussian">\n            <mean>0.0</mean>\n            <stddev>1.7e-2</stddev>\n          </noise>\n        </z>\n      </linear_acceleration>\n    </imu>\n  </sensor>\n</gazebo>\n'})}),"\n",(0,a.jsx)(e.h3,{id:"camera-sensor",children:"Camera Sensor"}),"\n",(0,a.jsx)(e.pre,{children:(0,a.jsx)(e.code,{className:"language-xml",children:'<link name="camera_link">\n  <inertial>\n    <mass value="0.01"/>\n    <origin xyz="0 0 0"/>\n    <inertia ixx="0.000001" ixy="0" ixz="0" iyy="0.000001" iyz="0" izz="0.000001"/>\n  </inertial>\n  <visual>\n    <geometry>\n      <box size="0.02 0.04 0.02"/>\n    </geometry>\n  </visual>\n  <collision>\n    <geometry>\n      <box size="0.02 0.04 0.02"/>\n    </geometry>\n  </collision>\n</link>\n\n<joint name="camera_joint" type="fixed">\n  <parent link="head"/>\n  <child link="camera_link"/>\n  <origin xyz="0.05 0 0" rpy="0 0 0"/>\n</joint>\n\n<gazebo reference="camera_link">\n  <sensor name="camera_sensor" type="camera">\n    <always_on>true</always_on>\n    <update_rate>30</update_rate>\n    <camera>\n      <horizontal_fov>1.047</horizontal_fov> \x3c!-- 60 degrees in radians --\x3e\n      <image>\n        <width>640</width>\n        <height>480</height>\n        <format>R8G8B8</format>\n      </image>\n      <clip>\n        <near>0.1</near>\n        <far>100</far>\n      </clip>\n    </camera>\n    <plugin filename="gz-sim-sensors-system" name="gz::sim::systems::Sensors">\n      <topic>camera/image_raw</topic>\n    </plugin>\n  </sensor>\n</gazebo>\n'})}),"\n",(0,a.jsx)(e.h3,{id:"lidar-sensor",children:"LiDAR Sensor"}),"\n",(0,a.jsx)(e.pre,{children:(0,a.jsx)(e.code,{className:"language-xml>",children:'<link name="lidar_link">\n  <inertial>\n    <mass value="0.1"/>\n    <origin xyz="0 0 0"/>\n    <inertia ixx="0.0001" ixy="0" ixz="0" iyy="0.0001" iyz="0" izz="0.0001"/>\n  </inertial>\n  <visual>\n    <geometry>\n      <cylinder length="0.05" radius="0.02"/>\n    </geometry>\n  </visual>\n  <collision>\n    <geometry>\n      <cylinder length="0.05" radius="0.02"/>\n    </geometry>\n  </collision>\n</link>\n\n<joint name="lidar_joint" type="fixed">\n  <parent link="base_link"/>\n  <child link="lidar_link"/>\n  <origin xyz="0.1 0 0.1" rpy="0 0 0"/>\n</joint>\n\n<gazebo reference="lidar_link">\n  <sensor name="lidar_sensor" type="gpu_lidar">\n    <always_on>true</always_on>\n    <update_rate>10</update_rate>\n    <ray>\n      <scan>\n        <horizontal>\n          <samples>720</samples>\n          <resolution>1</resolution>\n          <min_angle>-1.570796</min_angle> \x3c!-- -90 degrees --\x3e\n          <max_angle>1.570796</max_angle>   \x3c!-- 90 degrees --\x3e\n        </horizontal>\n      </scan>\n      <range>\n        <min>0.1</min>\n        <max>30.0</max>\n        <resolution>0.01</resolution>\n      </range>\n    </ray>\n    <plugin filename="gz-sim-sensors-system" name="gz::sim::systems::Sensors">\n      <topic>scan</topic>\n    </plugin>\n  </sensor>\n</gazebo>\n'})}),"\n",(0,a.jsx)(e.h2,{id:"complete-humanoid-robot-model-for-gazebo",children:"Complete Humanoid Robot Model for Gazebo"}),"\n",(0,a.jsx)(e.p,{children:"Here's a complete humanoid robot model with Gazebo integration:"}),"\n",(0,a.jsx)(e.pre,{children:(0,a.jsx)(e.code,{className:"language-xml",children:'<?xml version="1.0"?>\n<robot name="gazebo_humanoid" xmlns:xacro="http://www.ros.org/wiki/xacro">\n\n  \x3c!-- Base link --\x3e\n  <link name="base_link">\n    <visual>\n      <geometry>\n        <box size="0.15 0.15 0.1"/>\n      </geometry>\n      <material name="blue">\n        <color rgba="0 0 0.8 1"/>\n      </material>\n    </visual>\n\n    <collision>\n      <geometry>\n        <box size="0.15 0.15 0.1"/>\n      </geometry>\n    </collision>\n\n    <inertial>\n      <mass value="3.0"/>\n      <origin xyz="0 0 0"/>\n      <inertia ixx="0.02" ixy="0.0" ixz="0.0" iyy="0.02" iyz="0.0" izz="0.03"/>\n    </inertial>\n  </link>\n\n  \x3c!-- Gazebo properties for base link --\x3e\n  <gazebo reference="base_link">\n    <material>Gazebo/Blue</material>\n    <mu1>0.8</mu1>\n    <mu2>0.8</mu2>\n  </gazebo>\n\n  \x3c!-- Torso --\x3e\n  <link name="torso">\n    <visual>\n      <geometry>\n        <box size="0.2 0.15 0.4"/>\n      </geometry>\n      <material name="white">\n        <color rgba="1 1 1 1"/>\n      </material>\n    </visual>\n\n    <collision>\n      <geometry>\n        <box size="0.2 0.15 0.4"/>\n      </geometry>\n    </collision>\n\n    <inertial>\n      <mass value="5.0"/>\n      <origin xyz="0 0 0.2"/>\n      <inertia ixx="0.1" ixy="0.0" ixz="0.0" iyy="0.1" iyz="0.0" izz="0.05"/>\n    </inertial>\n  </link>\n\n  <joint name="torso_joint" type="fixed">\n    <parent link="base_link"/>\n    <child link="torso"/>\n    <origin xyz="0 0 0.15"/>\n  </joint>\n\n  \x3c!-- Head --\x3e\n  <link name="head">\n    <visual>\n      <geometry>\n        <sphere radius="0.08"/>\n      </geometry>\n      <material name="skin">\n        <color rgba="1 0.8 0.6 1"/>\n      </material>\n    </visual>\n\n    <collision>\n      <geometry>\n        <sphere radius="0.08"/>\n      </geometry>\n    </collision>\n\n    <inertial>\n      <mass value="1.0"/>\n      <origin xyz="0 0 0"/>\n      <inertia ixx="0.002" ixy="0.0" ixz="0.0" iyy="0.002" iyz="0.0" izz="0.002"/>\n    </inertial>\n  </link>\n\n  <joint name="neck_joint" type="revolute">\n    <parent link="torso"/>\n    <child link="head"/>\n    <origin xyz="0 0 0.35"/>\n    <axis xyz="0 1 0"/>\n    <limit lower="-0.5" upper="0.5" effort="10" velocity="1"/>\n    <dynamics damping="0.1" friction="0.01"/>\n  </joint>\n\n  \x3c!-- Left leg --\x3e\n  <link name="left_thigh">\n    <visual>\n      <geometry>\n        <cylinder length="0.4" radius="0.05"/>\n      </geometry>\n      <origin xyz="0 0 -0.2"/>\n      <material name="gray">\n        <color rgba="0.5 0.5 0.5 1"/>\n      </material>\n    </visual>\n\n    <collision>\n      <geometry>\n        <cylinder length="0.4" radius="0.05"/>\n      </geometry>\n      <origin xyz="0 0 -0.2"/>\n    </collision>\n\n    <inertial>\n      <mass value="2.0"/>\n      <origin xyz="0 0 -0.2"/>\n      <inertia ixx="0.02" ixy="0.0" ixz="0.0" iyy="0.02" iyz="0.0" izz="0.001"/>\n    </inertial>\n  </link>\n\n  <joint name="left_hip" type="revolute">\n    <parent link="base_link"/>\n    <child link="left_thigh"/>\n    <origin xyz="0 0.1 -0.05"/>\n    <axis xyz="0 1 0"/>\n    <limit lower="-1.57" upper="1.57" effort="100" velocity="1"/>\n    <dynamics damping="0.5" friction="0.1"/>\n  </joint>\n\n  <link name="left_shin">\n    <visual>\n      <geometry>\n        <cylinder length="0.4" radius="0.05"/>\n      </geometry>\n      <origin xyz="0 0 -0.2"/>\n      <material name="gray">\n        <color rgba="0.5 0.5 0.5 1"/>\n      </material>\n    </visual>\n\n    <collision>\n      <geometry>\n        <cylinder length="0.4" radius="0.05"/>\n      </geometry>\n      <origin xyz="0 0 -0.2"/>\n    </collision>\n\n    <inertial>\n      <mass value="1.5"/>\n      <origin xyz="0 0 -0.2"/>\n      <inertia ixx="0.015" ixy="0.0" ixz="0.0" iyy="0.015" iyz="0.0" izz="0.001"/>\n    </inertial>\n  </link>\n\n  <joint name="left_knee" type="revolute">\n    <parent link="left_thigh"/>\n    <child link="left_shin"/>\n    <origin xyz="0 0 -0.4"/>\n    <axis xyz="0 1 0"/>\n    <limit lower="0" upper="1.57" effort="100" velocity="1"/>\n    <dynamics damping="0.3" friction="0.05"/>\n  </joint>\n\n  \x3c!-- Right leg --\x3e\n  <link name="right_thigh">\n    <visual>\n      <geometry>\n        <cylinder length="0.4" radius="0.05"/>\n      </geometry>\n      <origin xyz="0 0 -0.2"/>\n      <material name="gray">\n        <color rgba="0.5 0.5 0.5 1"/>\n      </material>\n    </visual>\n\n    <collision>\n      <geometry>\n        <cylinder length="0.4" radius="0.05"/>\n      </geometry>\n      <origin xyz="0 0 -0.2"/>\n    </collision>\n\n    <inertial>\n      <mass value="2.0"/>\n      <origin xyz="0 0 -0.2"/>\n      <inertia ixx="0.02" ixy="0.0" ixz="0.0" iyy="0.02" iyz="0.0" izz="0.001"/>\n    </inertial>\n  </link>\n\n  <joint name="right_hip" type="revolute">\n    <parent link="base_link"/>\n    <child link="right_thigh"/>\n    <origin xyz="0 -0.1 -0.05"/>\n    <axis xyz="0 1 0"/>\n    <limit lower="-1.57" upper="1.57" effort="100" velocity="1"/>\n    <dynamics damping="0.5" friction="0.1"/>\n  </joint>\n\n  <link name="right_shin">\n    <visual>\n      <geometry>\n        <cylinder length="0.4" radius="0.05"/>\n      </geometry>\n      <origin xyz="0 0 -0.2"/>\n      <material name="gray">\n        <color rgba="0.5 0.5 0.5 1"/>\n      </material>\n    </visual>\n\n    <collision>\n      <geometry>\n        <cylinder length="0.4" radius="0.05"/>\n      </geometry>\n      <origin xyz="0 0 -0.2"/>\n    </collision>\n\n    <inertial>\n      <mass value="1.5"/>\n      <origin xyz="0 0 -0.2"/>\n      <inertia ixx="0.015" ixy="0.0" ixz="0.0" iyy="0.015" iyz="0.0" izz="0.001"/>\n    </inertial>\n  </link>\n\n  <joint name="right_knee" type="revolute">\n    <parent link="right_thigh"/>\n    <child link="right_shin"/>\n    <origin xyz="0 0 -0.4"/>\n    <axis xyz="0 1 0"/>\n    <limit lower="0" upper="1.57" effort="100" velocity="1"/>\n    <dynamics damping="0.3" friction="0.05"/>\n  </joint>\n\n  \x3c!-- Left arm --\x3e\n  <link name="left_upper_arm">\n    <visual>\n      <geometry>\n        <cylinder length="0.3" radius="0.04"/>\n      </geometry>\n      <origin xyz="0 0 -0.15"/>\n      <material name="gray">\n        <color rgba="0.5 0.5 0.5 1"/>\n      </material>\n    </visual>\n\n    <collision>\n      <geometry>\n        <cylinder length="0.3" radius="0.04"/>\n      </geometry>\n      <origin xyz="0 0 -0.15"/>\n    </collision>\n\n    <inertial>\n      <mass value="1.0"/>\n      <origin xyz="0 0 -0.15"/>\n      <inertia ixx="0.0075" ixy="0.0" ixz="0.0" iyy="0.0075" iyz="0.0" izz="0.001"/>\n    </inertial>\n  </link>\n\n  <joint name="left_shoulder" type="revolute">\n    <parent link="torso"/>\n    <child link="left_upper_arm"/>\n    <origin xyz="0.15 0 0.2"/>\n    <axis xyz="1 0 0"/>\n    <limit lower="-1.57" upper="1.57" effort="50" velocity="1"/>\n    <dynamics damping="0.2" friction="0.02"/>\n  </joint>\n\n  <link name="left_lower_arm">\n    <visual>\n      <geometry>\n        <cylinder length="0.3" radius="0.04"/>\n      </geometry>\n      <origin xyz="0 0 -0.15"/>\n      <material name="gray">\n        <color rgba="0.5 0.5 0.5 1"/>\n      </material>\n    </visual>\n\n    <collision>\n      <geometry>\n        <cylinder length="0.3" radius="0.04"/>\n      </geometry>\n      <origin xyz="0 0 -0.15"/>\n    </collision>\n\n    <inertial>\n      <mass value="0.8"/>\n      <origin xyz="0 0 -0.15"/>\n      <inertia ixx="0.006" ixy="0.0" ixz="0.0" iyy="0.006" iyz="0.0" izz="0.001"/>\n    </inertial>\n  </link>\n\n  <joint name="left_elbow" type="revolute">\n    <parent link="left_upper_arm"/>\n    <child link="left_lower_arm"/>\n    <origin xyz="0 0 -0.3"/>\n    <axis xyz="1 0 0"/>\n    <limit lower="0" upper="1.57" effort="50" velocity="1"/>\n    <dynamics damping="0.1" friction="0.01"/>\n  </joint>\n\n  \x3c!-- Right arm --\x3e\n  <link name="right_upper_arm">\n    <visual>\n      <geometry>\n        <cylinder length="0.3" radius="0.04"/>\n      </geometry>\n      <origin xyz="0 0 -0.15"/>\n      <material name="gray">\n        <color rgba="0.5 0.5 0.5 1"/>\n      </material>\n    </visual>\n\n    <collision>\n      <geometry>\n        <cylinder length="0.3" radius="0.04"/>\n      </geometry>\n      <origin xyz="0 0 -0.15"/>\n    </collision>\n\n    <inertial>\n      <mass value="1.0"/>\n      <origin xyz="0 0 -0.15"/>\n      <inertia ixx="0.0075" ixy="0.0" ixz="0.0" iyy="0.0075" iyz="0.0" izz="0.001"/>\n    </inertial>\n  </link>\n\n  <joint name="right_shoulder" type="revolute">\n    <parent link="torso"/>\n    <child link="right_upper_arm"/>\n    <origin xyz="-0.15 0 0.2"/>\n    <axis xyz="1 0 0"/>\n    <limit lower="-1.57" upper="1.57" effort="50" velocity="1"/>\n    <dynamics damping="0.2" friction="0.02"/>\n  </joint>\n\n  <link name="right_lower_arm">\n    <visual>\n      <geometry>\n        <cylinder length="0.3" radius="0.04"/>\n      </geometry>\n      <origin xyz="0 0 -0.15"/>\n      <material name="gray">\n        <color rgba="0.5 0.5 0.5 1"/>\n      </material>\n    </visual>\n\n    <collision>\n      <geometry>\n        <cylinder length="0.3" radius="0.04"/>\n      </geometry>\n      <origin xyz="0 0 -0.15"/>\n    </collision>\n\n    <inertial>\n      <mass value="0.8"/>\n      <origin xyz="0 0 -0.15"/>\n      <inertia ixx="0.006" ixy="0.0" ixz="0.0" iyy="0.006" iyz="0.0" izz="0.001"/>\n    </inertial>\n  </link>\n\n  <joint name="right_elbow" type="revolute">\n    <parent link="right_upper_arm"/>\n    <child link="right_lower_arm"/>\n    <origin xyz="0 0 -0.3"/>\n    <axis xyz="1 0 0"/>\n    <limit lower="0" upper="1.57" effort="50" velocity="1"/>\n    <dynamics damping="0.1" friction="0.01"/>\n  </joint>\n\n  \x3c!-- Gazebo plugins --\x3e\n  <gazebo>\n    \x3c!-- Joint state publisher --\x3e\n    <plugin filename="gz-sim-joint-state-publisher-system" name="gz::sim::systems::JointStatePublisher">\n      <joint_name>left_hip</joint_name>\n      <joint_name>left_knee</joint_name>\n      <joint_name>right_hip</joint_name>\n      <joint_name>right_knee</joint_name>\n      <joint_name>left_shoulder</joint_name>\n      <joint_name>left_elbow</joint_name>\n      <joint_name>right_shoulder</joint_name>\n      <joint_name>right_elbow</joint_name>\n      <joint_name>neck_joint</joint_name>\n    </plugin>\n\n    \x3c!-- IMU sensor --\x3e\n    <sensor name="imu_sensor" type="imu">\n      <always_on>true</always_on>\n      <update_rate>100</update_rate>\n      <topic>imu/data</topic>\n      <visualize>true</visualize>\n    </sensor>\n  </gazebo>\n\n  \x3c!-- Gazebo properties for other links --\x3e\n  <gazebo reference="torso">\n    <material>Gazebo/White</material>\n    <mu1>0.8</mu1>\n    <mu2>0.8</mu2>\n  </gazebo>\n\n  <gazebo reference="head">\n    <material>Gazebo/Yellow</material>\n    <mu1>0.8</mu1>\n    <mu2>0.8</mu2>\n  </gazebo>\n\n  <gazebo reference="left_thigh">\n    <material>Gazebo/Gray</material>\n    <mu1>0.8</mu1>\n    <mu2>0.8</mu2>\n  </gazebo>\n\n  <gazebo reference="left_shin">\n    <material>Gazebo/Gray</material>\n    <mu1>0.8</mu1>\n    <mu2>0.8</mu2>\n  </gazebo>\n\n  <gazebo reference="right_thigh">\n    <material>Gazebo/Gray</material>\n    <mu1>0.8</mu1>\n    <mu2>0.8</mu2>\n  </gazebo>\n\n  <gazebo reference="right_shin">\n    <material>Gazebo/Gray</material>\n    <mu1>0.8</mu1>\n    <mu2>0.8</mu2>\n  </gazebo>\n\n  <gazebo reference="left_upper_arm">\n    <material>Gazebo/Gray</material>\n    <mu1>0.8</mu1>\n    <mu2>0.8</mu2>\n  </gazebo>\n\n  <gazebo reference="left_lower_arm">\n    <material>Gazebo/Gray</material>\n    <mu1>0.8</mu1>\n    <mu2>0.8</mu2>\n  </gazebo>\n\n  <gazebo reference="right_upper_arm">\n    <material>Gazebo/Gray</material>\n    <mu1>0.8</mu1>\n    <mu2>0.8</mu2>\n  </gazebo>\n\n  <gazebo reference="right_lower_arm">\n    <material>Gazebo/Gray</material>\n    <mu1>0.8</mu1>\n    <mu2>0.8</mu2>\n  </gazebo>\n\n</robot>\n'})}),"\n",(0,a.jsx)(e.h2,{id:"hands-on-lab-creating-and-testing-your-robot-model",children:"Hands-on Lab: Creating and Testing Your Robot Model"}),"\n",(0,a.jsx)(e.p,{children:"In this lab, you'll create a complete humanoid robot model and test it in Gazebo."}),"\n",(0,a.jsx)(e.h3,{id:"step-1-create-the-model-directory-structure",children:"Step 1: Create the Model Directory Structure"}),"\n",(0,a.jsx)(e.pre,{children:(0,a.jsx)(e.code,{className:"language-bash",children:'# Create model directory\nmkdir -p ~/.gazebo/models/gazebo_humanoid\n\n# Create the model.config file\ncat > ~/.gazebo/models/gazebo_humanoid/model.config << EOF\n<?xml version="1.0"?>\n<model>\n  <name>gazebo_humanoid</name>\n  <version>1.0</version>\n  <sdf version="1.7">model.sdf</sdf>\n  <author>\n    <name>Your Name</name>\n    <email>your.email@example.com</email>\n  </author>\n  <description>A simple humanoid robot for Gazebo simulation.</description>\n</model>\nEOF\n'})}),"\n",(0,a.jsx)(e.h3,{id:"step-2-convert-urdf-to-sdf",children:"Step 2: Convert URDF to SDF"}),"\n",(0,a.jsx)(e.p,{children:"Gazebo works with SDF format, so you'll need to convert your URDF. Create the SDF file:"}),"\n",(0,a.jsx)(e.pre,{children:(0,a.jsx)(e.code,{className:"language-bash",children:"# Create the model.sdf file from your URDF\n# You can use the URDF from the previous example and convert it to SDF\n"})}),"\n",(0,a.jsx)(e.h3,{id:"step-3-create-a-launch-file",children:"Step 3: Create a Launch File"}),"\n",(0,a.jsxs)(e.p,{children:["Create ",(0,a.jsx)(e.code,{children:"launch_humanoid.launch.py"}),":"]}),"\n",(0,a.jsx)(e.pre,{children:(0,a.jsx)(e.code,{className:"language-python",children:"#!/usr/bin/env python3\n\nimport os\nfrom launch import LaunchDescription\nfrom launch.actions import IncludeLaunchDescription\nfrom launch.launch_description_sources import PythonLaunchDescriptionSource\nfrom launch.substitutions import PathJoinSubstitution\nfrom launch_ros.actions import Node\nfrom launch_ros.substitutions import FindPackageShare\n\ndef generate_launch_description():\n    # Get the launch directory\n    gazebo_ros_launch_dir = PathJoinSubstitution(\n        [FindPackageShare('gazebo_ros'), 'launch', 'gazebo.launch.py'])\n\n    # Launch Gazebo\n    gazebo = IncludeLaunchDescription(\n        PythonLaunchDescriptionSource(gazebo_ros_launch_dir),\n        launch_arguments={'verbose': 'false'}.items(),\n    )\n\n    # Spawn the robot in Gazebo\n    spawn_entity = Node(\n        package='gazebo_ros',\n        executable='spawn_entity.py',\n        arguments=[\n            '-entity', 'humanoid_robot',\n            '-x', '0', '-y', '0', '-z', '1.0',\n            '-topic', 'robot_description'\n        ],\n        output='screen'\n    )\n\n    # Robot state publisher\n    robot_state_publisher = Node(\n        package='robot_state_publisher',\n        executable='robot_state_publisher',\n        output='both',\n        parameters=[{'use_sim_time': True}],\n    )\n\n    # Joint state publisher\n    joint_state_publisher = Node(\n        package='joint_state_publisher',\n        executable='joint_state_publisher',\n        output='both',\n        parameters=[{'use_sim_time': True}],\n    )\n\n    ld = LaunchDescription()\n\n    # Add the actions\n    ld.add_action(gazebo)\n    ld.add_action(spawn_entity)\n    ld.add_action(robot_state_publisher)\n    ld.add_action(joint_state_publisher)\n\n    return ld\n"})}),"\n",(0,a.jsx)(e.h3,{id:"step-4-test-the-robot",children:"Step 4: Test the Robot"}),"\n",(0,a.jsxs)(e.ol,{children:["\n",(0,a.jsx)(e.li,{children:"Launch the simulation:"}),"\n"]}),"\n",(0,a.jsx)(e.pre,{children:(0,a.jsx)(e.code,{className:"language-bash",children:"ros2 launch launch_humanoid.launch.py\n"})}),"\n",(0,a.jsxs)(e.ol,{start:"2",children:["\n",(0,a.jsx)(e.li,{children:"In another terminal, check if the robot is properly loaded:"}),"\n"]}),"\n",(0,a.jsx)(e.pre,{children:(0,a.jsx)(e.code,{className:"language-bash",children:'# Check topics\nros2 topic list | grep -E "(joint|imu|scan)"\n\n# Check TF tree\nros2 run tf2_tools view_frames\n'})}),"\n",(0,a.jsx)(e.h2,{id:"troubleshooting-robot-models",children:"Troubleshooting Robot Models"}),"\n",(0,a.jsx)(e.h3,{id:"common-issues-and-solutions",children:"Common Issues and Solutions"}),"\n",(0,a.jsxs)(e.ol,{children:["\n",(0,a.jsxs)(e.li,{children:[(0,a.jsx)(e.strong,{children:"Robot falls through the ground"}),": Check mass and inertia values"]}),"\n",(0,a.jsxs)(e.li,{children:[(0,a.jsx)(e.strong,{children:"Joints are unstable"}),": Increase damping or reduce joint limits"]}),"\n",(0,a.jsxs)(e.li,{children:[(0,a.jsx)(e.strong,{children:"Robot doesn't respond to commands"}),": Verify plugin configuration"]}),"\n",(0,a.jsxs)(e.li,{children:[(0,a.jsx)(e.strong,{children:"Sensors don't publish data"}),": Check sensor configuration and topics"]}),"\n"]}),"\n",(0,a.jsx)(e.h3,{id:"debugging-commands",children:"Debugging Commands"}),"\n",(0,a.jsx)(e.pre,{children:(0,a.jsx)(e.code,{className:"language-bash",children:"# Check robot description\nros2 param get /robot_state_publisher robot_description\n\n# Check joint states\nros2 topic echo /joint_states\n\n# Visualize in RViz\nrviz2\n"})}),"\n",(0,a.jsx)(e.h2,{id:"best-practices",children:"Best Practices"}),"\n",(0,a.jsxs)(e.ol,{children:["\n",(0,a.jsxs)(e.li,{children:[(0,a.jsx)(e.strong,{children:"Realistic Physics"}),": Use realistic mass and inertia values"]}),"\n",(0,a.jsxs)(e.li,{children:[(0,a.jsx)(e.strong,{children:"Proper Damping"}),": Add appropriate damping to prevent oscillations"]}),"\n",(0,a.jsxs)(e.li,{children:[(0,a.jsx)(e.strong,{children:"Joint Limits"}),": Set realistic joint limits based on real robot capabilities"]}),"\n",(0,a.jsxs)(e.li,{children:[(0,a.jsx)(e.strong,{children:"Sensors"}),": Include appropriate sensors for your application"]}),"\n",(0,a.jsxs)(e.li,{children:[(0,a.jsx)(e.strong,{children:"Testing"}),": Test models in simple environments before complex ones"]}),"\n",(0,a.jsxs)(e.li,{children:[(0,a.jsx)(e.strong,{children:"Performance"}),": Balance detail with simulation performance"]}),"\n"]}),"\n",(0,a.jsx)(e.h2,{id:"next-steps",children:"Next Steps"}),"\n",(0,a.jsx)(e.p,{children:"After completing this chapter, you'll be ready to learn about sensor simulation in Chapter 4, where you'll explore how to properly simulate LiDAR, cameras, and IMUs for humanoid robots."})]})}function d(n={}){const{wrapper:e}={...(0,r.R)(),...n.components};return e?(0,a.jsx)(e,{...n,children:(0,a.jsx)(c,{...n})}):c(n)}},8453:(n,e,i)=>{i.d(e,{R:()=>t,x:()=>l});var o=i(6540);const a={},r=o.createContext(a);function t(n){const e=o.useContext(r);return o.useMemo(function(){return"function"==typeof n?n(e):{...e,...n}},[e,n])}function l(n){let e;return e=n.disableParentContext?"function"==typeof n.components?n.components(a):n.components||a:t(n.components),o.createElement(r.Provider,{value:e},n.children)}}}]);