# API Contract: Learner Progress Tracking

## Overview
This document defines the API contracts for tracking learner progress through the Physical AI & Humanoid Robotics textbook. The API allows tracking of chapter completion, lesson progress, lab exercise status, and quiz scores.

## Base URL
`/api/v1/progress`

## Authentication
All endpoints require a valid user session or API token in the Authorization header:
```
Authorization: Bearer {token}
```

## Endpoints

### GET /chapters/{chapterId}/progress
Retrieve progress information for a specific chapter for the authenticated user.

**Response (200 OK):**
```json
{
  "chapter_id": "module1-chapter1",
  "user_id": "user-123",
  "completion_percentage": 75.0,
  "started_at": "2025-12-06T10:00:00Z",
  "completed_at": null,
  "time_spent": 2400,
  "lessons_completed": 3,
  "total_lessons": 4,
  "lab_status": "in_progress",
  "quiz_scores": [
    {
      "quiz_id": "q1",
      "score": 80,
      "attempts": 1,
      "completed_at": "2025-12-06T10:30:00Z"
    }
  ]
}
```

### POST /chapters/{chapterId}/progress
Update progress for a specific chapter.

**Request body:**
```json
{
  "action": "lesson_completed",
  "lesson_id": "lesson-2",
  "time_spent": 1200
}
```

**Response (200 OK):**
```json
{
  "chapter_id": "module1-chapter1",
  "user_id": "user-123",
  "completion_percentage": 50.0,
  "updated_at": "2025-12-06T11:00:00Z"
}
```

### GET /dashboard/progress
Retrieve overall progress summary for the authenticated user.

**Response (200 OK):**
```json
{
  "total_completion": 15.0,
  "modules_completed": 0,
  "chapters_completed": 2,
  "total_chapters": 20,
  "time_spent_total": 7200,
  "recent_activity": [
    {
      "type": "chapter_completed",
      "title": "Introduction to ROS 2",
      "timestamp": "2025-12-06T09:30:00Z"
    }
  ]
}
```

### GET /modules/{moduleId}/progress
Retrieve progress information for a specific module.

**Response (200 OK):**
```json
{
  "module_id": "module1",
  "user_id": "user-123",
  "completion_percentage": 25.0,
  "chapters_progress": [
    {
      "chapter_id": "module1-chapter1",
      "title": "Introduction to ROS 2",
      "completion_percentage": 100.0
    },
    {
      "chapter_id": "module1-chapter2",
      "title": "ROS 2 Communication Patterns",
      "completion_percentage": 0.0
    }
  ]
}
```

## Error Responses

All endpoints may return the following error responses:

**400 Bad Request:**
```json
{
  "error": "invalid_input",
  "message": "The request body contains invalid data"
}
```

**401 Unauthorized:**
```json
{
  "error": "unauthorized",
  "message": "Authentication required"
}
```

**404 Not Found:**
```json
{
  "error": "not_found",
  "message": "The requested resource does not exist"
}
```

**500 Internal Server Error:**
```json
{
  "error": "server_error",
  "message": "An unexpected error occurred"
}
```

## Data Validation

- All IDs must be non-empty strings
- Completion percentages must be between 0.0 and 100.0
- Time spent values must be non-negative integers (seconds)
- Dates must be in ISO 8601 format